<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" >
<html>
    <head>
        <title>Toponyms InfoVis Project</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
        <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
        <script type="text/javascript" src="//maps.googleapis.com/maps/api/js?key=AIzaSyCu0d6lpgFSzznwCppY2HEoca4y1AM0Cow&v=3.exp&sensor=false&libraries=geometry"></script>
        <script type="text/javascript" src="//netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
        
        
        <script type="text/javascript" src="vendor/nanoscroller/jquery.nanoscroller.min.js"></script>
        <script type="text/javascript" src="vendor/kmeans/kmeans.js"></script>
        <script type="text/javascript" src="vendor/knockout/knockout-3.2.0.js"></script>
        <script type="text/javascript" src="vendor/d3/d3.min.js" charset="utf-8"></script>
        
        <script type="text/javascript" src="javascript/main.js"></script>
        <script type="text/javascript" src="javascript/colors.js"></script>
        <script type="text/javascript" src="javascript/gui.js"></script>
        
        <script type="text/javascript">
            $( document ).ready( function() {
                VIZAPP.initialize();
            });
        </script>
        
        <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.css" />
        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css" />
        <link rel="stylesheet" href="vendor/nanoscroller/nanoscroller.css" />
        <link rel="stylesheet" href="css/viswebproject.css" />
    </head>
    <body>
        <table id="page-structure" class="page-structure disable-select">
            <tr>
                <td class="left-column" style="background-color: #d7d7d7; box-shadow: 0 0 4px #aaaaaa inset;">
                    <div id="dataset-select-panel" class="sliding-panel left-column">
                        <div class="wrapper">
                            <h3>Select a dataset</h3>
                            <div class="dataset-control-panel">
                                <button id="upload-dataset-btn" class="small-button">+</button>
                                <button id="delete-dataset-btn" class="small-button">-</button>
                            </div>
                            <div id="dataset-btn-list" data-bind="foreach: datasets">
                                <button data-bind="click: $root.clickDataset" class="simple-button dataset-btn center-block">
                                    <span data-bind="text: name"></span>
                                    <span data-bind="text: toponyms" class="pull-right"></span>
                                </button>
                            </div>
                            <div id="load-progress" class="stl-progress-bar simple-button dataset-btn center-block">
                                <div class="stl-progress"></div>
                            </div>
                            <button id="confirm-delete-btn" class="simple-button control-on-right alert-grad">Delete selected</button>
                        </div>
                        <div class="bg-info footer">
                            <h4 id="login-info"><a>Click here</a> to login.</h4>
                        </div>
                    </div>
                    <div id="dataset-work-panel" class="sliding-panel left-column">
                        <table class="disable-select page-structure">
                            <tr>
                                <td id="list-selector-container" class="left-column">
                                    <table style="width: 100%;"><tr>
                                        <td style="width: 15%; padding: 2px">
                                            <button id="back-to-dataset" class="simple-button">
                                                Back
                                            </button>
                                        </td><td style="width: 80%; text-align: center">
                                            <div id="list-selector">
                                                <h4 id="select-toponyms-btn" class="list-selector selected" data-bind="enable: toponyms().length > 0">Toponyms</h4>
                                                <h4 id="select-groups-btn" class="list-selector" data-bind="enable: formants().length > 0">Groups</h4>
                                            </div>
                                        </td><td style="width: 5%"></td>
                                    </tr></table>
                                </td>
                            </tr>
<!--                            <tr>
                                <td class="left-column">
                                </td>
                            </tr>-->
                            <tr>
                                <td class="left-column list-container">
                                    <div id="toponyms-list-container" class="list-holder">
                                        <div class="list-control-panel">
                                            <div class="input-block" style="width: 50%" >
                                                <input class="input-text-sm" data-bind="value: tFilter, valueUpdate: 'afterkeydown'" type="text" placeholder="Search" style="width: 100%"  />
                                                <span data-bind="click: function(){ tFilter(''); }, visible: tFilter() != ''" class="clear-input">x</span>
                                            </div>
                                            <div class="simple-block">
                                                <button data-bind="click: function(d,e){ sortListBy($root.toponyms, $root.tsortHeaders[0], $root.tactiveSort);}, text: (tsortHeaders[0].asc() ? tsortHeaders[0].titleasc : tsortHeaders[0].titledes), css:{selected: tactiveSort() === tsortHeaders[0]}" class="simple-button"></button>
                                            </div>
                                            <button data-bind="click: deselectEverything, enable: toponyms().length > 1" class="simple-button">None</button>                                            
                                        </div>
                                        <div class="nano">
                                            <div id="toponyms-list-content" class="content">
                                                <ul id="toponyms-list" class="list disable-select" data-bind="foreach: toponyms, selectableList: {onFunc: $root.selectToponym, offFunc: $root.deselectToponym}">
                                                    <li data-bind="visible: $root.matchFilter($root.tFilter(), name), showToponymOnMap: selected(), showTriggerOnHover: true, style:{ background: selected() ? color : 'white'}, css:{'ui-selected selected': selected()}" class="dynamic-button ui-widget-content">
                                                        <span data-bind="text: name" class="name"></span>
                                                        <span data-bind="visible: !latitude" class="no-data-alert">No location</span>
                                                        <span data-bind="click: $root.showSideInfoWindow, css: {triggered: infotriggered()}, turnHalfCircle: infotriggered()" class="glyphicon glyphicon-chevron-right pull-right info-trigger"></span>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="groups-list-container" class="list-holder">
                                        <div class="list-control-panel">
                                            <div class="input-block" style="width: 40%" >
                                                <input class="input-text-sm" data-bind="value: fFilter, valueUpdate: 'afterkeydown'" type="text" placeholder="Search" style="width: 100%"  />
                                                <span data-bind="click: function(){ fFilter(''); }, visible: fFilter() != ''" class="clear-input">x</span>
                                            </div>
                                            <div class="simple-block">
                                                <button data-bind="click: function(d,e){ sortListBy($root.formants, $root.fsortHeaders[0], $root.factiveSort);}, text: (fsortHeaders[0].asc() ? fsortHeaders[0].titleasc : fsortHeaders[0].titledes), css:{selected: factiveSort() === fsortHeaders[0]}" class="simple-button"></button><button
                                                    data-bind="click: function(d,e){ sortListBy($root.formants, $root.fsortHeaders[1], $root.factiveSort);}, text: (fsortHeaders[1].asc() ? fsortHeaders[1].titleasc : fsortHeaders[1].titledes), css:{selected: factiveSort() === fsortHeaders[1]}" class="simple-button"></button>
                                            </div>
                                            <button data-bind="click: deselectEverything, enable: toponyms().length > 1" class="simple-button">None</button>
                                        </div>
                                        <div class="nano">
                                            <div class="content">
                                                <ul id="groups-list" class="list disable-select" data-bind="foreach: formants, selectableList: {onFunc: $root.selectFormant, offFunc: $root.deselectFormant}">
                                                    <li data-bind="visible: $root.matchFilter($root.fFilter(), name), showGroupOnMap: selectedTops() === size, showTriggerOnHover: true, style:{ background: selectedTops() === size ? color : 'white'}, css:{'ui-selected selected': selectedTops() === size}" class="dynamic-button ui-widget-content">
                                                        <span data-bind="text: name" class="name"></span>
                                                        <span data-bind="click: $root.showSideInfoWindow, css: {triggered: infotriggered()}, turnHalfCircle: infotriggered()" class="glyphicon glyphicon-chevron-right pull-right info-trigger"></span>
                                                        <span data-bind="text: size" class="size small pull-right group-badge"></span>
                                                        <div data-bind="style: {width: (selectedTops() / size) * 100 + '%', background: color}, visibile: selectedTops() > 0 && selectedTops() < size" class="group-select-progress"></div>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="display: none">
                                        <ul><li id="toponym-list-template" class="dynamic-button ui-widget-content">
                                                <span class="name"></span>
                                                <span class="glyphicon glyphicon-chevron-right pull-right t-info-trigger"></span>
                                        </li></ul>
                                        <ul><li id="formant-list-template" class="dynamic-button ui-widget-content">
                                                <span class="name"></span>
                                                <span class="glyphicon glyphicon-chevron-right pull-right g-info-trigger"></span>
                                                <span class="size small pull-right group-badge"></span>
                                        </li></ul>
                                    </div>                                    
                                </td>
                            </tr>
                        </table>
                    </div>
                </td>
                <td>
                    <div id="info-window-container" class="info-window-container">
                        <div id="info-panel" class="panel panel-default">
                            <div class="panel-heading">
                                <button data-bind="click: sideInfoWindow.close" type="button" class="close" aria-hidden="true">&times;</button>
                                <h4 class="small-margins"><span data-bind="text: sideInfoWindow.name()" class="title"></span></br><small></small></h4>
                            </div>
                            <div class="panel-body">
                                <dl class="dl-horizontal info-list">
                                    <dt data-bind="visible: sideInfoWindow.latlng()" class="latlng">LatLng</dt>
                                    <dd data-bind="text: sideInfoWindow.latlng(), visible: sideInfoWindow.latlng()" class="latlng"></dd>
                                    <dt data-bind="visible: sideInfoWindow.language()" class="language">Language</dt>
                                    <dd data-bind="text: sideInfoWindow.language(), visible: sideInfoWindow.language()" class="language"></dd>
                                    <dt data-bind="visible: sideInfoWindow.type()" class="type">Type</dt>
                                    <dd data-bind="text: sideInfoWindow.type(), visible: sideInfoWindow.type()" class="type"></dd>
                                    <dt data-bind="visible: sideInfoWindow.group()" class="group">Group</dt>
                                    <dd data-bind="text: sideInfoWindow.group(), visible: sideInfoWindow.group()" class="group">
                                        <!--<button id="test-button" class="btn btn-default btn-xs"></button>-->
                                    </dd>
                                    <dt data-bind="visible: sideInfoWindow.size()" class="size">Size</dt>
                                    <dd data-bind="text: sideInfoWindow.size(), visible: sideInfoWindow.size()" class="size"></dd>
                                    <dt data-bind="visible: sideInfoWindow.toponymlist().length > 0" class="toponym-list">Toponyms</dt>
                                    <dd data-bind="foreach: sideInfoWindow.toponymlist(), visible: sideInfoWindow.toponymlist().length > 0" class="toponym-list small">
                                        <button data-bind="text: $data" class="element-info-btn btn btn-default btn-xs"></button>
                                    </dd>                          
                                </dl>
                            </div>
                        </div>
                    </div>
                    <div id="map-canvas" style="width:100%; height:100%; margin:0px 0px; padding:0px; z-index: 1"></div>
                </td>
            </tr>  
        </table>
        <div id="load-file-modal" class="full-alert">
            <div id="data-type-options" class="simple-block-justified">
                <div class="simple-block-justified">
                    <button id="csv-button" class="simple-button selected">CSV</button>
                </div>
                <div class="simple-block-justified">
                    <button id="tsv-button" class="simple-button">TSV</button>
                </div>
            </div>
            <div id="select-dataset-file" class="select-area">
                <span>Select file</span>
            </div>
            <div>
                <input id="dataset-file" name="dataset-file" type="file" style="display:none" />
                <input id="name-dataset" class="input-text" style="width:100%" type="text" placeholder="Type the dataset name" />
            </div>
            <div style="margin-top: 15px;">
                <button id="load-button" class="simple-button" style="width:40%; color: #0066CC">Load</button>
                <button id="cancel-button" class="simple-button" style="width:40%;">Cancel</button>
            </div>
        </div>
    </body>
</html>
